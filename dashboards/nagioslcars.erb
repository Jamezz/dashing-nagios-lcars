<% content_for :title do %>Nagios - LCARS Dashboard<% end %>
    <script type="text/javascript" src="assets/webviewinfo.js"></script>
    <script type="text/javascript" src="assets/arrive.js"></script>
    <script type="text/javascript" src="assets/lcarssdk.js"></script>    
    <script type="text/javascript" src="assets/sdktemplates.js"></script>       
    <script type="text/javascript" src="assets/scrollButton.js"></script>
    <script type="text/javascript" src="assets/levelBar.js"></script>
    <link rel="stylesheet" href="assets/lcarssdk.css" type="text/css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="assets/sdktemplates.css" type="text/css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="assets/scrollButton.css" type="text/css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="assets/levelBar.css" type="text/css" media="screen" charset="utf-8" />
    
    <link rel="stylesheet" href="assets/theme_ussNotAffiliated.css" type="text/css" media="screen" charset="utf-8" /> 

	<style>

    #wpr_viewport{width:100%; height:100%; padding:10px; text-align:right;}

    #wpr_leftControls{width:465px;}
    #wpr_leftControls > .column{top:0px; bottom:0px; right:0px; width:150px;}
    #wpr_leftControls > :first-child{height:100%;}
    .bracket{width:305px; height:255px;} 
    #wpr_blockControls{top:260px; width:305px;}
    #wpr_tabControls{width:305px; top:715px;}
	
	
	#nagiosDetailsWidget1{
	}
	
	.Table
    {
        display: table;
		table-layout: fixed;
		width:100%;
		border-collapse: separate;
		border-spacing: 0;
    }
    .Title
    {
        display: table-caption;
        text-align: center;
        font-weight: bold;
        font-size: larger;
    }
    .Heading
    {
        display: flex;
        font-weight: bold;
        text-align: center;
		padding-bottom: 0.5em;
    }
    .Row
    {
        display: flex;
		padding-bottom: 1em;
    }
    .Cell
    {
        display: inline-flex  !important;
		font-size: larger;

        border-width: thin;
        padding-left: 5px;
        padding-right: 5px;
    }
	
    
    .buttonWrap{flex-wrap:wrap;}
    .buttonWrap .button{margin-top:5px; margin-left:5px; position:relative;}
    .buttonWrap .button:nth-child(odd){margin-left:0px !important;}
    .buttonWrap .button:first-child, .buttonWrap .button:nth-child(2){margin-top:0px;}
    
    #wpr_mainView{margin-left:10px;}
    #wpr_mainView > .header{height:320px;}
    #wpr_mainView > .header .content{top:0px; right:0px; bottom:65px; left:185px;}
    #wpr_mainView > .header .title{right:0px;}
    #wpr_mainView > .header .column{left:0px; top:0px; bottom:0px; width:150px; overflow:visible;}
    #wpr_mainView > .header .column .elbow .bar{width:206px; right:-204px;}
    #wpr_mainView > .header .row{left:359px; right:0px; bottom:0px;}
    
    #wpr_mainView > .main .column{left:0px; top:0px; bottom:0px; width:150px;  overflow:visible;}
    #wpr_mainView > .main .column .elbow .bar{width:206px; right:-204px;}
    #wpr_mainView > .main .row{left:359px; right:0px; top:0px;}
    #wpr_mainView > .main .content{top:65px; right:0px; left:185px; bottom:0px;}
    
    #wpr_mainView > .header .row .bar:nth-child(2), #wpr_mainView > .main .row .bar:nth-child(2){width:143px;}
    #wpr_mainView > .header .row .bar:nth-child(4), #wpr_mainView > .main .row .bar:nth-child(4){width:414px;}
    #wpr_mainView > .header .row .bar:nth-child(5), #wpr_mainView > .main .row .bar:nth-child(5){width:256px;}
    #wpr_mainView > .header .row .bar:nth-child(6), #wpr_mainView > .main .row .bar:nth-child(6){width:79px;}
    #wpr_mainView > .header .row .bar:nth-child(7), #wpr_mainView > .main .row .bar:nth-child(7){width:49px;}  
    
    #wpr_commandButtons{right:0px; bottom:0px; width:429px;}
    #wpr_commandButtons.buttonWrap .button{margin-top:15px; margin-left:15px; width:207px;}
    
    /* Static Pattern Heights */
    .twoHeight{height:125px;}
    .threeHeight{height:190px;}
    .fourHeight{height:255px;}
  
    body{-webkit-filter:hue-rotate(0deg) grayscale(0); filter:hue-rotate(0deg) grayscale(0); -webkit-animation: colorRotate 1s linear 1; animation: colorRotate 1s linear 1;}
    
	.hidemeplz{
	  display: none   !important;
	}
	
	
    @-webkit-keyframes colorRotate {
        0% {-webkit-filter: hue-rotate(0deg) grayscale(0); 	}
        50%{-webkit-filter: hue-rotate(360deg) grayscale(0);}       
        75%{-webkit-filter: hue-rotate(360deg) grayscale(1);}
        100%{-webkit-filter: hue-rotate(360deg) grayscale(0); }
    }

    @keyframes colorRotate {
        0% {filter: hue-rotate(0deg) grayscale(0);}
        50%{ filter: hue-rotate(360deg) grayscale(0);}
        75%{filter: hue-rotate(360deg) grayscale(1);}
        100% {filter: hue-rotate(360deg) grayscale(0);}
    }    

	/* Standard Color Group */
	
	.stdcolor1:not(.complexButton){background-color:#8AB2FF; border-color:#8AB2FF;}
    .stdcolor2:not(.complexButton){background-color:#45597F; border-color:#45597F;}
	.stdcolor3:not(.complexButton){background-color:#D6E4FF; border-color:#D6E4FF;}
	.stdcolor4:not(.complexButton){background-color:#6B727F; border-color:#6B727F;}
	.stdcolor5:not(.complexButton){background-color:#6E8FCC; border-color:#6E8FCC;}
	
    .blue1>.bar, .blue1>.block, .blue1>.button, .blue1>.cap{background-color:#3366FF; border-color:#3366FF;}
    .blue2>.bar, .blue2>.block, .blue2>.button, .blue2>.cap{background-color:#3366CC; border-color:#3366CC;}
    .blue3>.bar, .blue3>.block, .blue3>.button, .blue3>.cap{background-color:#336699; border-color:#336699;}
    .blue4>.bar, .blue4>.block, .blue4>.button, .blue4>.cap{background-color:#003366; border-color:#003366;}

    .green1>.bar, .green1>.block, .green1>.button, .green1>.cap{background-color:#3E7A5E; border-color:#3E7A5E;}
    .green2>.bar, .green2>.block, .green2>.button, .green2>.cap{background-color:#4A766E; border-color:#4A766E;}
    .green3>.bar, .green3>.block, .green3>.button, .green3>.cap{background-color:#174038; border-color:#174038;}    
	

    .blue1:not(.complexButton){background-color:#3366FF; border-color:#3366FF;}
    .blue2:not(.complexButton){background-color:#3366CC; border-color:#3366CC;}
    .blue3:not(.complexButton){background-color:#336699; border-color:#336699;}
    .blue4:not(.complexButton){background-color:#003366; border-color:#003366;}    

    .green1:not(.complexButton){background-color:#3E7A5E; border-color:#3E7A5E;}
    .green2:not(.complexButton){background-color:#4A766E; border-color:#4A766E;}
    .green3:not(.complexButton){background-color:#174038; border-color:#174038;}

	
     /* Red Alert Color Group */   
    .ra_red1>.bar, .ra_red1>.block, .ra_red1>.button, .ra_red1>.cap{background-color:#ff0000; border-color:#ff0000;} 
    .ra_red2>.bar, .ra_red2>.block, .ra_red2>.button, .ra_red2>.cap{background-color:#cc0000; border-color:#cc0000;} 
    .ra_red3>.bar, .ra_red3>.block, .ra_red3>.button, .ra_red3>.cap{background-color:#990000; border-color:#990000;}
    .ra_red4>.bar, .ra_red4>.block, .ra_red4>.button, .ra_red4>.cap{background-color:#660000; border-color:#660000;} 
    .ra_red5>.bar, .ra_red5>.block, .ra_red5>.button, .ra_red5>.cap{background-color:#330000; border-color:#330000;} 

    .ra_grey1>.bar, .ra_grey1>.block, .ra_grey1>.button, .ra_grey1>.cap{background-color:#cccccc; border-color:#cccccc;}
    .ra_grey2>.bar, .ra_grey2>.block, .ra_grey2>.button, .ra_grey2>.cap{background-color:#999999; border-color:#999999;}    

    .ra_white>.bar, .ra_white>.block, .ra_white>.button, .ra_white>.cap{background-color:#ffffff; border-color:#ffffff;}

    .ra_red1:not(.complexButton){background-color:#ff0000; border-color:#ff0000;}
    .ra_red2:not(.complexButton){background-color:#cc0000; border-color:#cc0000;}
    .ra_red3:not(.complexButton){background-color:#990000; border-color:#990000;}
    .ra_red4:not(.complexButton){background-color:#660000; border-color:#660000;}    
    .ra_red5:not(.complexButton){background-color:#330000; border-color:#330000;}

    .ra_grey1:not(.complexButton){background-color:#cccccc; border-color:#cccccc;}
    .ra_grey2:not(.complexButton){background-color:#999999; border-color:#999999;}

    .ra_white:not(.complexButton){background-color:#ffffff; border-color:#ffffff;}

    .ra_redText1{color:#330000;}
    .ra_redText2{color:#660000;}
    .ra_redText3{color:#990000; }
    .ra_redText4{color:#cc0000;}    
    .ra_redText5{color:#ff0000;}

    .ra_greyText1{color:#cccccc;}
    .ra_greyText2{color:#999999;}

    .ra_whiteText{color:#ffffff;}

     /* Blink between button color and Grey 1 */   
    .ra_g1:not(.complexButton){ -webkit-animation: ra_g1 3.5s step-end infinite !important; animation: ra_g1 3.5s step-end infinite !important; }
    .ra_g1.complexButton :not(.numericBlock){ -webkit-animation: ra_g1 3.5s step-end infinite !important; animation: ra_g1 3.5s step-end infinite !important;}
    @-webkit-keyframes ra_g1 {
       from, to {}
         50% {background-color:#cccccc; border-color:#cccccc;}
    }
    @keyframes ra_g1 {
       from, to { }
         50% {background-color:#cccccc; border-color:#cccccc;}
    }

    /* White Strobe */    
    .alertFlash .alertFlash:not(.complexButton){-webkit-animation: whiteFade .25s linear; animation: whiteFade .25s linear;}
    .alertFlash .alertFlash.complexButton :not(.numericBlock){-webkit-animation: whiteFade .25s linear; animation: whiteFade .25s linear;}
    @-webkit-keyframes whiteFade {
         0% {background-color:#ffffff;border-color:#ffffff; }    
    }

    @keyframes whiteFade {
         0% {background-color:#ffffff;border-color:#ffffff; }
    }   
     
</style>

<div id="nagiosDetailsWidgetContainer1" "class="gridster">
	<div id="nagiosDetailsWidget1" data-id="nagios-details-dev" data-view="Nagdetails"></div>
</div>


<script>
var colorArray = ['ra_red1', 'ra_red2', 'ra_red3', 'ra_red4', 'ra_red5'];
var timer_colorChanges = null
var array_colorChangeObjects = null;

var nemesisUI = {type:'wrapper', id:'wpr_viewport', class:'scale', version:'row', flex:'h', arrive:function(){$('#wpr_viewport').viewport('scale', {width:auto, height:auto});}, children:[

    {type:'wrapper', version:'column', id:'wpr_mainView', flex:'v', flexC:'h', children:[   
        {type:'wrapper', version:'header', children:[
            {type:'wrapper', version:'column', flex:'v', children:[
                {type:'button', color:'stdcolor1', size:'threeHeight', hidden:true},
                {type:'elbow', version:'bottomLeft', color:'stdcolor1', flexC:'v', hidden:true}
            ]},
            {type:'wrapper', version:'row', flex:'h', children:[
                {type:'bar', color:'stdcolor2', hidden:true},
                {type:'bar', color:'stdcolor2', hidden:true},
                {type:'bar', color:'stdcolor3', hidden:true},
                {type:'bar', color:'stdcolor3', hidden:true},
                {type:'bar', color:'stdcolor3', hidden:true},
                {type:'bar', color:'stdcolor4', hidden:true},
                {type:'bar', color:'stdcolor4', hidden:true},
                {type:'bar', color:'stdcolor4', hidden:true}
            ]},
            {type:'wrapper', version:'content', hidden:true, children:[
                {type:'wrapper', id:'wpr_commandButtons', flex:'h', class:'buttonWrap', children:[
                    {type:'button', color:'ra_grey1', version:'pill'},
                    {type:'button', color:'ra_grey1', version:'pill'},
                    {type:'button', color:'ra_grey1', version:'pill'},
                    {type:'button', color:'ra_grey1', version:'pill', label:'Documentation', state:'blink', href:'https://github.com/Aricwithana/LCARS-SDK/wiki'}           
                ]},
                {type:'title', class:'alert_text', text:'NAGIOS LCARS DASHBOARD'}
            ]}
        ]},
        {type:'wrapper', class:'main', flexC:'v', children:[
            {type:'wrapper', version:'column', flex:'v', children:[
                {type:'elbow', version:'topLeft', color:'stdcolor1', size:'threeHeight', hidden:true},
                {type:'button', color:'stdcolor1', hidden:true},
                {type:'button', color:'stdcolor1', hidden:true},
                {type:'button', color:'stdcolor1', hidden:true},
                {type:'button', color:'stdcolor1', size:'twoHeight', hidden:true},
                {type:'button', color:'stdcolor1', flexC:'v', hidden:true}
            ]},
            {type:'wrapper', version:'row', flex:'h', children:[
                {type:'bar', color:'stdcolor2', hidden:true},
                {type:'bar', color:'stdcolor2', size:'half', hidden:true},
                {type:'bar', color:'stdcolor3', hidden:true},
                {type:'bar', color:'stdcolor3', hidden:true},
                {type:'bar', color:'stdcolor3', hidden:true},
                {type:'bar', color:'stdcolor4', hidden:true},
                {type:'bar', color:'stdcolor4', hidden:true},
                {type:'bar', color:'stdcolor4', hidden:true}
            ]},
            {type:'wrapper', version:'content', children:[]}
        ]}
    ]}
]}   
 

// Barebones 'Automated' Show Pattern - idea testing a later proper module.
function showMainFrame(){
    var headerBars = $('#wpr_mainView > .header .row *');
    var headerColumn = $('#wpr_mainView > .header .column > *');
    var mainBars = $('#wpr_mainView > .main .row *');
    var mainColumn = $('#wpr_mainView > .main > .elbow, #wpr_mainView > .main .column > *');
    var leftControlsColumn = $('#wpr_leftControls > .column > *')
    
    sequenceHeaderPattern = []
    sequenceFooterPattern = []
    
    $(headerColumn).each(function(){
        sequenceHeaderPattern.push(this);
    });       
    
    $(headerBars).each(function(){
        sequenceHeaderPattern.push(this);
    });
    
    sequenceHeaderPattern.reverse()
    
    $(mainBars).each(function(){
        sequenceFooterPattern.push(this);
    });
    
    sequenceFooterPattern.reverse()
    
    $(mainColumn).each(function(){
        sequenceFooterPattern.push(this); 
    }); 
    
    $(leftControlsColumn).each(function(){
        sequenceFooterPattern.push(this); 
    }); 
    
    sequenceFooterPattern.push($('#wpr_leftControls > :first-child'))
    sequenceFooterPattern.push($('.header .content'))

    $(sequenceHeaderPattern).showObjectSequence({});
    $(sequenceFooterPattern).showObjectSequence({success:function(){
        $('#wpr_mainView .header > *:not(.column)').showObject({success:function(){
            array_colorChangeObjects = $('#wpr_leftControls .button');
            raMainFrameSetup();
            timer_colorChanges = setInterval(function(){
                var random = Math.floor(Math.random()*(array_colorChangeObjects.length+1))
                $(array_colorChangeObjects[random]).objectSettings({color:LCARS.colorGen(colorArray)});
            }, 3750);
        }});
    }});
}


// Barebones 'Automated' Alert System - idea testing a later proper module.    
var headerRASequence = []
var mainRASequence = []
var timer_whiteFlash = null;  
    
function raMainFrameSetup(){
    
    var headerBars = $('#wpr_mainView > .header .row *');
    var headerColumn = $('#wpr_mainView > .header .column > *');
    var mainBars = $('#wpr_mainView > .main .row *');
    var mainColumn = $('#wpr_mainView > .main .column > *');

    $(headerColumn).each(function(){
        headerRASequence.push(this);
    });       
    $(headerBars).each(function(){
        headerRASequence.push(this);
    });
    
    $(mainColumn).each(function(){
        mainRASequence.push(this);
    });
    
    mainRASequence.reverse();
    
    $(mainBars).each(function(){
        mainRASequence.push(this); 
    });
    var posValHeader = .5;
    var posValMain = .1;
    $(headerRASequence).each(function(){
        $(this).attr('style', '-webkit-animation-delay:' + posValHeader+'s; animation-delay:' + posValHeader+'s;')
        $(this).addClass('alertFlash');
        posValHeader = posValHeader + .1
    });
    
    $(mainRASequence).each(function(){
        $(this).attr('style', '-webkit-animation-delay:' + posValMain+'s; animation-delay:' + posValMain+'s;')
        
        $(this).addClass('alertFlash');
        posValMain = posValMain + .1
    }); 
    console.log(posValMain*100);
    timer_whiteFlash = setInterval(function(){$('body').toggleClass('alertFlash')}, posValMain*1000);
}    


$(document).on('ready', function(){
    $(nemesisUI).createObject({appendTo:'body', success:function(){ 
        showMainFrame();
		var target = $(".wrapper.content");
		var temp = $("#nagiosDetailsWidgetContainer1").detach()
		temp.appendTo(target[1]);
    }});
});

function replaceColorClass(targetClass, replacementClass)
{
   $('.' + targetClass).removeClass(targetClass).addClass(replacementClass);
}
    
</script> 
